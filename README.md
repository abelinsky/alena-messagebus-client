
# Alena MessageBus Client

Модуль представляет собой простую реализацию клиента виртуального ассистента, которая может использоваться для подключения
к платформе ассистента, отправки сообщений в платформу и реагирования на сообщения, полученные из платформы.

## AlenaMessageBusClient()

Объект `AlenaMessageBusClient()` может быть настроен для соединения с любым хостом и портом, а также с любым эндпоинтом на хосте.
В связи с этим он может использоваться для работы как с основной платформой, так и с шиной GUI. Если не заданы настроки
соединения, будет выполнена попытка подключения к локальному инстансу ядра платформы со значениями эндпоинта и порта, заданными по умолчанию.

## Message()

Объект `Message` является представлением внутриплатформенного сообщения, которое всегда содержит тип сообщения и может содержать 
данные и контекст. Данные представляют собой полезную информацию, а контекст обычно содержит информацию о происхождении
сообщения и/или получателе.

```python
Message('MESSAGE_TYPE', data={'payload': 42}, context={'origin': 'VoiceService'})
```

## Примеры

Примеры отправки сообщения в платформу и реагирования на поступившие из платформы сообщения.

### Отправка сообщения в платформу

```python
from alena_messagebus_client import MessageBusClient, Message

print('Настройка подключения клиента к локальному ядру платформы виртуального ассистента')
client = MessageBusClient()
client.run_in_thread()

print('Отправка сообщения..')
client.emit(Message('speak', data={'utterance': 'Hello World!'}))
```

### Перехват сообщения из шины

```python
from alena_messagebus_client import MessageBusClient, Message

print('Настройка подключения клиента к локальному ядру платформы виртуального ассистента')
client = MessageBusClient()

def print_utterance(message):
    print('Ассистент передал послание: "{}"'.format(message.data.get('utterance')))


print('Регистрация отклика на сообщение из платформы...')
client.on('speak', print_utterance)

client.run_forever()
```